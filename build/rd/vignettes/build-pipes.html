

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Get started &mdash; flowr 0.9.7 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="flowr 0.9.7 documentation" href="../../index.html"/>
        <link rel="next" title="FAQs" href="../../faqs.html"/>
        <link rel="prev" title="flowr: Streamline your workflows" href="../../index.html"/>


<script src="../../_static/labibi.js"></script>



<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-16853172-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../../index.html" class="icon icon-home"> flowr
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Get started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#toy-example">Toy example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stitch-it">Stitch it</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plot-it">Plot it</a></li>
<li class="toctree-l2"><a class="reference internal" href="#test-it">Test it</a></li>
<li class="toctree-l2"><a class="reference internal" href="#submit-it">Submit it</a></li>
<li class="toctree-l2"><a class="reference internal" href="#check-its-status">Check its status</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kill-it">Kill it</a></li>
<li class="toctree-l2"><a class="reference internal" href="#re-run-a-flow">Re-run a flow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#building-pipelines">Building Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ingredients-for-building-a-pipeline">Ingredients for building a pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#flow-definition">1. Flow Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#flow-mat-a-table-with-shell-commands-to-run">2. Flow mat: A table with shell commands to run</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example">Example:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#submission-types">Submission types</a></li>
<li class="toctree-l1"><a class="reference internal" href="#dependency-types">Dependency types</a></li>
<li class="toctree-l1"><a class="reference internal" href="#relationships">Relationships</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#serial-one-to-one-relationship">Serial: one to one relationship</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gather-many-to-one-relationship">Gather: many to one relationship</a></li>
<li class="toctree-l2"><a class="reference internal" href="#burst-one-to-many-relationship">Burst: one to many relationship</a></li>
<li class="toctree-l2"><a class="reference internal" href="#passing-of-flow-definition-resource-columns">Passing of flow definition resource columns</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#available-pipelines">Available Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="#cluster-support">Cluster Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="#example-of-building-a-pipeline">Example of building a pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#define-modules">Define modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#define-the-pipeline">Define the pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#generate-a-flowmat">Generate a flowmat</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-flow-definition">Create flow definition</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../faqs.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/complete-help.html">Help on Available functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#check-args">check_args</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#description">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#arguments">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#check">check</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id1">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id2">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id3">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id4">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#fetch">fetch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id5">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id6">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id7">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id8">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#flow">flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id9">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id10">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id11">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id13">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#get-unique-id">get_unique_id</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id14">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id15">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id16">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id17">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#get-wds">get_wds</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id18">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id19">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id20">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id21">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#job">job</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id22">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id23">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id24">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id25">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#kill">kill</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id26">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id27">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id28">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id30">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#flowopts">flowopts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id31">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id32">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id33">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#format">Format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id106">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#plot-flow">plot_flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id107">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id108">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id109">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id110">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#queue">queue</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id111">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id112">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id113">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#details">Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id116">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#rerun">rerun</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id117">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id118">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id119">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id120">Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id124">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#run">run</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id125">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id126">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id127">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id128">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#setup">setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id129">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id130">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id131">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id132">Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id133">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#id134">status</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id135">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id136">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id137">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id138">Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id139">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#id140">submit_flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id141">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id142">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id143">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id144">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#test-queue">test_queue</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id145">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id146">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id147">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id148">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#to-flow">to_flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id149">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id151">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id152">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#value">Value</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id154">Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id155">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#id156">to_flowdef</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id157">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id158">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id159">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id160">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#to-flowdet">to_flowdet</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id161">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id162">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id163">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id164">Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id165">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#as-flowmat">as.flowmat</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id166">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id167">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id168">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id169">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../topics/complete-help.html#whisker-render">whisker_render</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id170">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id172">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id173">Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/complete-help.html#id174">Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">flowr</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
    <li>Get started</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/rd/vignettes/build-pipes.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  
  <div class="section" id="get-started">
<h1>Get started<a class="headerlink" href="#get-started" title="Permalink to this headline">¶</a></h1>
<div class="code r highlight-python"><div class="highlight"><pre>install.packages(&#39;devtools&#39;)
devtools::install_github(&quot;sahilseth/flowr&quot;)
</pre></div>
</div>
<p>Run a setup function which copies &#8216;flowr&#8217; helper script to enable using flow from shell terminal itself. A few examples <a class="reference external" href="https://github.com/sahilseth/rfun">here</a>.</p>
<div class="code r highlight-python"><div class="highlight"><pre><span class="n">library</span><span class="p">(</span><span class="n">flowr</span><span class="p">)</span>
</pre></div>
</div>
<div class="code r highlight-python"><div class="highlight"><pre><span class="n">setup</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="toy-example">
<h2>Toy example<a class="headerlink" href="#toy-example" title="Permalink to this headline">¶</a></h2>
<div class="figure">
<img alt="" src="../../_images/toy.png" />
</div>
<p>A simple example where we have three instances of sleep (wait for few seconds), after completion three tmp jobs are started which create files with some random data. After all these are complete, a merge step follows, which combines them into one big file. Next we use <code class="docutils literal"><span class="pre">du</span></code> to calculate the size of the resulting file.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is quite similar in structure to a typical workflow from where a series of alignment and sorting steps may take place on the raw fastq files. Followed by merging of the resulting bam files into one large file per-sample and further downstream processing.</p>
</div>
<p>The table below is referred to as <a class="reference external" href="http://docs.flowr.space/en/latest/rd/vignettes/build-pipes.html#flow-mat-a-table-with-shell-commands-to-run">flow_mat</a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="15%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">samplename</th>
<th class="head">jobname</th>
<th class="head">cmd</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sample1</td>
<td>sleep</td>
<td>sleep 10 &amp;&amp; sleep 2;echo hello</td>
</tr>
<tr class="row-odd"><td>sample1</td>
<td>sleep</td>
<td>sleep 11 &amp;&amp; sleep 8;echo hello</td>
</tr>
<tr class="row-even"><td>sample1</td>
<td>sleep</td>
<td>sleep 11 &amp;&amp; sleep 17;echo hello</td>
</tr>
<tr class="row-odd"><td>sample1</td>
<td>create_tmp</td>
<td>head -c 100000 /dev/urandom &gt; sample1_tmp_1</td>
</tr>
<tr class="row-even"><td>sample1</td>
<td>create_tmp</td>
<td>head -c 100000 /dev/urandom &gt; sample1_tmp_2</td>
</tr>
<tr class="row-odd"><td>sample1</td>
<td>create_tmp</td>
<td>head -c 100000 /dev/urandom &gt; sample1_tmp_3</td>
</tr>
<tr class="row-even"><td>sample1</td>
<td>merge</td>
<td>cat sample1_tmp_1 sample1_tmp_2 sample1_tmp_3 &gt; sample1_merged</td>
</tr>
<tr class="row-odd"><td>sample1</td>
<td>size</td>
<td>du -sh sample1_merged; echo MY shell: $SHELL</td>
</tr>
</tbody>
</table>
<p>We use an additional file specifying relationship between the steps, and also other resource requirements <a class="reference external" href="http://docs.flowr.space/en/latest/rd/vignettes/build-pipes.html#flow-definition">flow_def</a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="10%" />
<col width="11%" />
<col width="10%" />
<col width="7%" />
<col width="15%" />
<col width="9%" />
<col width="13%" />
<col width="9%" />
<col width="7%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">jobname</th>
<th class="head">sub_type</th>
<th class="head">prev_jobs</th>
<th class="head">dep_type</th>
<th class="head">queue</th>
<th class="head">memory_reserved</th>
<th class="head">walltime</th>
<th class="head">cpu_reserved</th>
<th class="head">platform</th>
<th class="head">jobid</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sleep</td>
<td>scatter</td>
<td>none</td>
<td>none</td>
<td>short</td>
<td>2000</td>
<td>1:00</td>
<td>1</td>
<td>torque</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>create_tmp</td>
<td>scatter</td>
<td>sleep</td>
<td>serial</td>
<td>short</td>
<td>2000</td>
<td>1:00</td>
<td>1</td>
<td>torque</td>
<td>2</td>
</tr>
<tr class="row-even"><td>merge</td>
<td>serial</td>
<td>create_tmp</td>
<td>gather</td>
<td>short</td>
<td>2000</td>
<td>1:00</td>
<td>1</td>
<td>torque</td>
<td>3</td>
</tr>
<tr class="row-odd"><td>size</td>
<td>serial</td>
<td>merge</td>
<td>serial</td>
<td>short</td>
<td>2000</td>
<td>1:00</td>
<td>1</td>
<td>torque</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="stitch-it">
<h2>Stitch it<a class="headerlink" href="#stitch-it" title="Permalink to this headline">¶</a></h2>
<div class="code r highlight-python"><div class="highlight"><pre>fobj &lt;- to_flow(x = flow_mat, def = as.flowdef(flow_def),
    flowname = &quot;example1&quot;, platform = &quot;lsf&quot;)
</pre></div>
</div>
</div>
<div class="section" id="plot-it">
<h2>Plot it<a class="headerlink" href="#plot-it" title="Permalink to this headline">¶</a></h2>
<div class="code r highlight-python"><div class="highlight"><pre><span class="n">plot_flow</span><span class="p">(</span><span class="n">fobj</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure" id="id1">
<img alt="Flow chart describing process for example 1" src="../../_images/plot_example1-1.png" />
<p class="caption"><span class="caption-text">Flow chart describing process for example 1</span></p>
</div>
</div>
<div class="section" id="test-it">
<h2>Test it<a class="headerlink" href="#test-it" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Dry run (submit)</div></blockquote>
<div class="code r highlight-python"><div class="highlight"><pre><span class="n">submit_flow</span><span class="p">(</span><span class="n">fobj</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>Test Successful!
You may check this folder for consistency. Also you may re-run submit with execute=TRUE
 ~/flowr/type1-20150520-15-18-27-5mSd32G0
</pre></div>
</div>
</div>
<div class="section" id="submit-it">
<h2>Submit it<a class="headerlink" href="#submit-it" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Submit to the cluster !</div></blockquote>
<div class="code r highlight-python"><div class="highlight"><pre><span class="n">submit_flow</span><span class="p">(</span><span class="n">fobj</span><span class="p">,</span> <span class="n">execute</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>Flow has been submitted. Track it from terminal using:
flowr::status(x=&quot;~/flowr/type1-20150520-15-18-46-sySOzZnE&quot;)
OR
flowr status x=~/flowr/type1-20150520-15-18-46-sySOzZnE
</pre></div>
</div>
</div>
<div class="section" id="check-its-status">
<h2>Check its status<a class="headerlink" href="#check-its-status" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre>flowr status x=~/flowr/type1-20150520-15-18-46-sySOzZnE
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>Loading required package: shape
Flowr: streamlining workflows
Showing status of: /rsrch2/iacs/iacs_dep/sseth/flowr/type1-20150520-15-18-46-sySOzZnE


|          | total| started| completed| exit_status|
|:---------|-----:|-------:|---------:|-----------:|
|001.sleep |    10|      10|        10|           0|
|002.tmp   |    10|      10|        10|           0|
|003.merge |     1|       1|         1|           0|
|004.size  |     1|       1|         1|           0|
</pre></div>
</div>
</div>
<div class="section" id="kill-it">
<h2>Kill it<a class="headerlink" href="#kill-it" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="c">## kill one flow</span>
<span class="c">## flowr kill_flow x=flow_wd</span>

<span class="c">## In case path matches multiple folders, flowr asks before killing</span>
<span class="n">kill</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;fastq_haplotyper*&#39;</span><span class="p">)</span>
<span class="c">##  Flowr: streamlining workflows</span>
<span class="c">##  found multiple wds:</span>
<span class="c">##  ./fastq_haplotyper-MS132-20150825-16-24-04-0Lv1PbpI</span>
<span class="c">##  /fastq_haplotyper-MS132-20150825-17-47-52-5vFIkrMD</span>

<span class="c">##  Really kill all of them ? kill again with force=TRUE</span>

<span class="c">## submitting again with force=TRUE will kill them:</span>
<span class="n">kill</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;fastq_haplotyper*&#39;</span><span class="p">,</span> <span class="n">force</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Even if you want to kill the flow, its best to let submit_flow do its job, when done simply use kill(flow_wd). If submit_flow is interrupted, flow detail files etc are not created, thus flowr can&#8217;t associate submitted jobs with flow instance.</p>
</div>
</div>
<div class="section" id="re-run-a-flow">
<h2>Re-run a flow<a class="headerlink" href="#re-run-a-flow" title="Permalink to this headline">¶</a></h2>
<p>flowr also enables you to re-run a pipeline in case of hardware or software failures.</p>
<ul class="simple">
<li><strong>hardware</strong> no change to the pipeline is required, simply rerun it: <code class="docutils literal"><span class="pre">rerun(x=flow_wd,</span> <span class="pre">start_from=&lt;intermediate</span> <span class="pre">step&gt;)</span></code></li>
<li><strong>software</strong> either a change to flowmat or flowdef has been made: <code class="docutils literal"><span class="pre">rerun(x=flow_wd,</span> <span class="pre">mat</span> <span class="pre">=</span> <span class="pre">new_flowmat,</span> <span class="pre">def</span> <span class="pre">=</span> <span class="pre">new_flowdef,</span> <span class="pre">start_from=&lt;intermediate</span> <span class="pre">step&gt;)</span></code></li>
</ul>
<p>In either case there are two things which are always required, a flow_wd (the folder created by flowr which contains execution logs) and name of the step from where we want to start execution. Refer to the <a class="reference external" href="http://docs.flowr.space/en/latest/rd/topics/complete-help.html">help section</a> for more details.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Interested? Here are some details on <a class="reference external" href="#building-pipelines">building pipelines</a></p>
</div>
</div>
</div>
<div class="section" id="building-pipelines">
<h1>Building Pipelines<a class="headerlink" href="#building-pipelines" title="Permalink to this headline">¶</a></h1>
<p>An easy and quick way to build a workflow is create two separate files. First is a table with commands to run, second has details regarding how the modules are stitched together. In the rest of this document we would refer to them as flow_mat and flow_def respectively.</p>
<p>Both these files have a <code class="docutils literal"><span class="pre">jobname</span></code> column which is used as a ID to connect them to each other.</p>
</div>
<div class="section" id="ingredients-for-building-a-pipeline">
<h1>Ingredients for building a pipeline<a class="headerlink" href="#ingredients-for-building-a-pipeline" title="Permalink to this headline">¶</a></h1>
<p>Essentially there are two main components which go into building a flowr pipeline, a flow matrix with commands to run and a flow definition with details regarding how to stich a pipeline.</p>
<p>Let us read some files to see what they look like and what they do.</p>
<div class="code r highlight-python"><div class="highlight"><pre>## ------ load some example data
ex = file.path(system.file(package = &quot;flowr&quot;), &quot;pipelines&quot;)
flow_mat = as.flowmat(file.path(ex, &quot;sleep_pipe.tsv&quot;))
flow_def = as.flowdef(file.path(ex, &quot;sleep_pipe.def&quot;))
</pre></div>
</div>
<div class="section" id="flow-definition">
<h2>1. Flow Definition<a class="headerlink" href="#flow-definition" title="Permalink to this headline">¶</a></h2>
<p>Each row in this table refers to one step of the pipeline. It describes the resources used by this step and also its relationship with other steps. Especially, the step immediately prior to it.</p>
<p>It is a tab separated file, with a minimum of 4 columns:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">jobname</span></code>: Name of the step</li>
<li><code class="docutils literal"><span class="pre">sub_type</span></code>: Short for submission type, refers to, how should multiple commands of this step be submitted. Possible values are <code class="docutils literal"><span class="pre">serial</span></code> or <code class="docutils literal"><span class="pre">scatter</span></code>.</li>
<li><code class="docutils literal"><span class="pre">prev_job</span></code>: Short for previous job, this would be jobname of the previous job. This can be NA/./none if this is a independent/initial step, and no previous step is required for this to start.</li>
<li><code class="docutils literal"><span class="pre">dep_type</span></code>: Short for dependency type, refers to the relationship of this job with the one defined in <code class="docutils literal"><span class="pre">prev_job</span></code>. This can take values <code class="docutils literal"><span class="pre">none</span></code>, <code class="docutils literal"><span class="pre">gather</span></code>, <code class="docutils literal"><span class="pre">serial</span></code> or <code class="docutils literal"><span class="pre">burst</span></code>.</li>
</ul>
<p>These would be explained in detail, below.</p>
<p>Apart from the above described variables, several others defining the resource requirements of each step are also available. These give great amount of flexibility to the user in choosing CPU, wall time, memory and queue for each step (and are passed along to the HPCC platform).</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">cpu_reserved</span></code></li>
<li><code class="docutils literal"><span class="pre">memory_reserved</span></code></li>
<li><code class="docutils literal"><span class="pre">nodes</span></code></li>
<li><code class="docutils literal"><span class="pre">walltime</span></code></li>
<li><code class="docutils literal"><span class="pre">queue</span></code></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is especially useful for genomics pipelines, since each step may use different amount of resources. For example, in a typical setup, if one step uses 16 cores these would be blocked and not used during processing of several other steps. Thus resulting in blockage and high cluster load (even when actual CPU usage may be low). Being able to tune them, makes this setup quite efficient.</p>
</div>
<p>Most cluster platforms accept these resource arguments. Essentially a file like <a class="reference external" href="https://github.com/sahilseth/flowr/blob/master/inst/conf/torque.sh">this</a> is used as a template, and variables defined in curly braces ( ex. <code class="docutils literal"><span class="pre">{{{CPU}}}</span></code> ) are filled up using the flow definition file.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If these (resource requirements) columns not included in the flow_def, their values should be explicitly defined in the submission template.</p>
</div>
<p>Here is an example of a typical <a class="reference external" href="https://raw.githubusercontent.com/sahilseth/flowr/master/inst/pipelines/sleep_pipe.def">flow_def</a> file.</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="10%" />
<col width="11%" />
<col width="10%" />
<col width="7%" />
<col width="15%" />
<col width="9%" />
<col width="13%" />
<col width="9%" />
<col width="7%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">jobname</th>
<th class="head">sub_type</th>
<th class="head">prev_jobs</th>
<th class="head">dep_type</th>
<th class="head">queue</th>
<th class="head">memory_reserved</th>
<th class="head">walltime</th>
<th class="head">cpu_reserved</th>
<th class="head">platform</th>
<th class="head">jobid</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sleep</td>
<td>scatter</td>
<td>none</td>
<td>none</td>
<td>short</td>
<td>2000</td>
<td>1:00</td>
<td>1</td>
<td>torque</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>create_tmp</td>
<td>scatter</td>
<td>sleep</td>
<td>serial</td>
<td>short</td>
<td>2000</td>
<td>1:00</td>
<td>1</td>
<td>torque</td>
<td>2</td>
</tr>
<tr class="row-even"><td>merge</td>
<td>serial</td>
<td>create_tmp</td>
<td>gather</td>
<td>short</td>
<td>2000</td>
<td>1:00</td>
<td>1</td>
<td>torque</td>
<td>3</td>
</tr>
<tr class="row-odd"><td>size</td>
<td>serial</td>
<td>merge</td>
<td>serial</td>
<td>short</td>
<td>2000</td>
<td>1:00</td>
<td>1</td>
<td>torque</td>
<td>4</td>
</tr>
</tbody>
</table>
<!-- Each row of this table translates to a call to ([job](http://docs.flowr.space/build/html/rd/topics/job.html) or) [queue](http://docs.flowr.space/build/html/rd/topics/queue.html) function. --><!--
- jobname: is passed as `name` argument to job().
- prev_jobs: passed as `previous_job` argument  to job().
- dep_type: passed as `dependency_type` argument  to job(). Possible values: gather, serial
- sub_type: passed as `submission_type` argument  to job().
- queue: name of the queue to be used for this particular job.
    Since each jobs can be submitted to a different queue, this makes your flow very flexible
- memory_reserved: Refer to your system admin guide on what values should go here.
    Some pipelines: 160000, 16g etc representing a 16GB reservation of RAM
- walltime: How long would this job run. Again refer to your HPCC guide. Example: 24:00, 24:00:00
- cpu_reserved: Amount of CPU reserved.

Its best to have this as a tab seperated file (with no row.names). --></div>
<div class="section" id="flow-mat-a-table-with-shell-commands-to-run">
<h2>2. Flow mat: A table with shell commands to run<a class="headerlink" href="#flow-mat-a-table-with-shell-commands-to-run" title="Permalink to this headline">¶</a></h2>
<p>This is also a tab separated table, with a minimum of three columns as defined below:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">samplename</span></code>: A grouping column. The table is split using this column and each subset is treated as a individual flow. This makes it very easy to process multiple samples using a single submission command.<ul>
<li>If all the commands are for a single sample, one can just repeat a dummy name like sample1 all throughout.</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">jobname</span></code>: This corresponds to the name of the step. This should match exactly with the jobname column in flow_def table defined above.</li>
<li><code class="docutils literal"><span class="pre">cmd</span></code>: A shell command to run. One can get quite creative here. These could be multiple shell commands separated by a <code class="docutils literal"><span class="pre">;</span></code> or <code class="docutils literal"><span class="pre">&amp;&amp;</span></code>, more on this <a class="reference external" href="http://stackoverflow.com/questions/3573742/difference-between-echo-hello-ls-vs-echo-hello-ls">here</a>. Though to keep this clean you may just wrap a multi-line command into a script and just source the bash script from here.</li>
</ul>
<p>Here is an example <a class="reference external" href="https://github.com/sahilseth/flowr/blob/master/inst/pipelines/sleep_pipe.tsv">flow_mat</a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="15%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">samplename</th>
<th class="head">jobname</th>
<th class="head">cmd</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sample1</td>
<td>sleep</td>
<td>sleep 10 &amp;&amp; sleep 2;echo hello</td>
</tr>
<tr class="row-odd"><td>sample1</td>
<td>sleep</td>
<td>sleep 11 &amp;&amp; sleep 8;echo hello</td>
</tr>
<tr class="row-even"><td>sample1</td>
<td>sleep</td>
<td>sleep 11 &amp;&amp; sleep 17;echo hello</td>
</tr>
<tr class="row-odd"><td>sample1</td>
<td>create_tmp</td>
<td>head -c 100000 /dev/urandom &gt; sample1_tmp_1</td>
</tr>
<tr class="row-even"><td>sample1</td>
<td>create_tmp</td>
<td>head -c 100000 /dev/urandom &gt; sample1_tmp_2</td>
</tr>
<tr class="row-odd"><td>sample1</td>
<td>create_tmp</td>
<td>head -c 100000 /dev/urandom &gt; sample1_tmp_3</td>
</tr>
<tr class="row-even"><td>sample1</td>
<td>merge</td>
<td>cat sample1_tmp_1 sample1_tmp_2 sample1_tmp_3 &gt; sample1_merged</td>
</tr>
<tr class="row-odd"><td>sample1</td>
<td>size</td>
<td>du -sh sample1_merged; echo MY shell: $SHELL</td>
</tr>
</tbody>
</table>
<!---
### Style 2

This style may be more suited for people who like to explore more advanced usage and like to code in R. Also this one find this much faster if jobs and their relationships changes a lot.

Here instead of seperating cmds and definitions one defines them step by step incrementally.

- Use: queue(), to define the computing cluster being used
- Use: multiple calls job()
- Use: flow() to stich the jobs into a flow.


Currently we support LSF, Torque and SGE. Let us use LSF for this example.


```r
qobj <- queue(platform = "lsf", queue = "normal", verbose = FALSE)
```

Let us stitch a simple flow with three jobs, which are submitted one after the other.


```r
job1 <- job(name = "myjob1", cmds = "sleep1", q_obj = qobj)
job2 <- job(name = "myjob2", cmds = "sleep2", q_obj = qobj, previous_job = "myjob1", dependency_type = "serial")
job3 <- job(name = "myjob3", cmds = "sleep3", q_obj = qobj, previous_job = "myjob1", dependency_type = "serial")
fobj <- flow(name = "myflow", jobs = list(job1, job2, job3), desc="description")
plot_flow(fobj)
```

The above translates to a flow definition which looks like this:


```r
dat <- flowr:::create_jobs_mat(fobj)
knitr:::kable(dat)
```
---><div class="section" id="example">
<h3>Example:<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>A &#8212;-&gt; B &#8212;&#8211;&gt; C &#8212;&#8211;&gt; D</p>
<p>Consider an example with three steps A, B and C. A has 10 commands from A1 to A10, similarly B has 10 commands B1 through B10 and C has a single command, C1.</p>
<p>Consider another step D (with D1-D3), which comes after C.</p>
</div>
</div>
</div>
<div class="section" id="submission-types">
<h1>Submission types<a class="headerlink" href="#submission-types" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><em>This refers to the sub_type column in flow definition.</em></div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">scatter</span></code>: submit all commands as parallel, independent jobs.<ul>
<li><em>Submit A1 through A10 as independent jobs</em></li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">serial</span></code>: run these commands sequentially one after the other.<ul>
<li><em>Wrap A1 through A10, into a single job.</em></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="dependency-types">
<h1>Dependency types<a class="headerlink" href="#dependency-types" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><em>This refers to the dep_type column in flow definition.</em></div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">none</span></code>: independent job.<ul>
<li><em>Initial step A has no dependency</em></li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">serial</span></code>: <em>one to one</em> relationship with previous job.<ul>
<li><em>B1 can start as soon as A1 completes.</em></li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">gather</span></code>: <em>many to one</em>, wait for <strong>all</strong> commands in previous job to finish then start the current step.<ul>
<li><em>All jobs of B (1-10), need to complete before C1 is started</em></li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">burst</span></code>: <em>one to many</em> wait for the previous step which has one job and start processing all cmds in the current step.<ul>
<li><em>D1 to D3 are started as soon as C1 finishes.</em></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="relationships">
<h1>Relationships<a class="headerlink" href="#relationships" title="Permalink to this headline">¶</a></h1>
<p>Using the above submission and dependency types one can create several types of relationships between former and later jobs. Here are a few pipelines of relationships one may typically use.</p>
<div class="section" id="serial-one-to-one-relationship">
<h2>Serial: one to one relationship<a class="headerlink" href="#serial-one-to-one-relationship" title="Permalink to this headline">¶</a></h2>
<p>[scatter] &#8212;serial&#8212;&gt; [scatter]</p>
<p>A is submitted as scatter, A1 through A10. Further B1, requires A1 to complete; B2 requires A2 and so on, but they need not wait for all of step A jobs to complete. Also B1 through B10 are independent of each other.</p>
<p>To set this up, A and B would have <code class="docutils literal"><span class="pre">sub_type</span></code> <code class="docutils literal"><span class="pre">scatter</span></code> and B would have <code class="docutils literal"><span class="pre">dep_type</span></code> as <code class="docutils literal"><span class="pre">serial</span></code>. Further, since A is an initial step its <code class="docutils literal"><span class="pre">dep_type</span></code> and <code class="docutils literal"><span class="pre">prev_job</span></code> would defined as <code class="docutils literal"><span class="pre">none</span></code>.</p>
</div>
<div class="section" id="gather-many-to-one-relationship">
<h2>Gather: many to one relationship<a class="headerlink" href="#gather-many-to-one-relationship" title="Permalink to this headline">¶</a></h2>
<p>[scatter] &#8212;gather&#8212;&gt; [serial]</p>
<p>Since C is a single command which requires all steps of B to complete, intuitively it needs to <code class="docutils literal"><span class="pre">gather</span></code> pieces of data generated by B. In this case <code class="docutils literal"><span class="pre">dep_type</span></code> would be <code class="docutils literal"><span class="pre">gather</span></code> and <code class="docutils literal"><span class="pre">sub_type</span></code> type would be <code class="docutils literal"><span class="pre">serial</span></code> since it is a single command.</p>
<!---
- makes sense when previous job had many commands running in parallel and current job would wait for all
- so previous job submission: `scatter`, and current job's dependency type `gather`

---></div>
<div class="section" id="burst-one-to-many-relationship">
<h2>Burst: one to many relationship<a class="headerlink" href="#burst-one-to-many-relationship" title="Permalink to this headline">¶</a></h2>
<p>[serial] &#8212;burst&#8212;&gt; [scatter]</p>
<p>Further, D is a set of three commands (D1-D3), which need to wait for a single process (C1) to complete. They would be submitted as <code class="docutils literal"><span class="pre">scatter</span></code> after waiting on C in a <code class="docutils literal"><span class="pre">burst</span></code> type dependency.</p>
<!---
- makes sense when previous job had one command current job would split and submit several jobs in parallel
- so previous job submission_type: `serial`, and current job's dependency type `burst`, with a submission type: `scatter`

---><p>In essence and example flow_def would look like as follows (with additional resource requirements not shown for brevity).</p>
<div class="code r highlight-python"><div class="highlight"><pre>ex2def = as.flowdef(file.path(ex, &quot;abcd.def&quot;))
ex2mat = as.flowmat(file.path(ex, &quot;abcd.tsv&quot;))
fobj = suppressMessages(to_flow(x = ex2mat, def = ex2def))
kable(ex2def[, 1:4])
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="25%" />
<col width="27%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">jobname</th>
<th class="head">sub_type</th>
<th class="head">prev_jobs</th>
<th class="head">dep_type</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>A</td>
<td>scatter</td>
<td>none</td>
<td>none</td>
</tr>
<tr class="row-odd"><td>B</td>
<td>scatter</td>
<td>A</td>
<td>serial</td>
</tr>
<tr class="row-even"><td>C</td>
<td>serial</td>
<td>B</td>
<td>gather</td>
</tr>
<tr class="row-odd"><td>D</td>
<td>scatter</td>
<td>C</td>
<td>burst</td>
</tr>
</tbody>
</table>
<div class="code r highlight-python"><div class="highlight"><pre><span class="n">plot_flow</span><span class="p">(</span><span class="n">fobj</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure">
<img alt="" src="../../_images/build_pipe_plt_abcd-1.png" />
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is a darker more prominent shadow to indicate scatter steps.</p>
</div>
</div>
<div class="section" id="passing-of-flow-definition-resource-columns">
<h2>Passing of flow definition resource columns<a class="headerlink" href="#passing-of-flow-definition-resource-columns" title="Permalink to this headline">¶</a></h2>
<p>The resource requirement columns of flow definition are passed along to the final (cluster) submission script.</p>
<p>The following table provides a mapping between the flow definition columns and variables in the submission template (<a class="reference external" href="#flow-def-columns">pipelines below</a>).</p>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">flow_def_column</th>
<th class="head">hpc_script_variable</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>nodes</td>
<td>NODES</td>
</tr>
<tr class="row-odd"><td>cpu_reserved</td>
<td>CPU</td>
</tr>
<tr class="row-even"><td>memory_reserved</td>
<td>MEMORY</td>
</tr>
<tr class="row-odd"><td>email</td>
<td>EMAIL</td>
</tr>
<tr class="row-even"><td>walltime</td>
<td>WALLTIME</td>
</tr>
<tr class="row-odd"><td>extra_opts</td>
<td>EXTRA_OPTS</td>
</tr>
<tr class="row-even"><td>*</td>
<td>JOBNAME</td>
</tr>
<tr class="row-odd"><td>*</td>
<td>STDOUT</td>
</tr>
<tr class="row-even"><td>*</td>
<td>CWD</td>
</tr>
<tr class="row-odd"><td>*</td>
<td>DEPENDENCY</td>
</tr>
<tr class="row-even"><td>*</td>
<td>TRIGGER</td>
</tr>
<tr class="row-odd"><td>**</td>
<td>CMD</td>
</tr>
</tbody>
</table>
<p>*: These are generated on the fly **: This is gathered from flow_mat</p>
</div>
</div>
<div class="section" id="available-pipelines">
<h1>Available Pipelines<a class="headerlink" href="#available-pipelines" title="Permalink to this headline">¶</a></h1>
<p>Here are some of the available piplines along with their respective locations</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="13%" />
<col width="13%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">def</th>
<th class="head">conf</th>
<th class="head">pipe</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sleep_pipe</td>
<td>sleep_pipe.def</td>
<td>NA</td>
<td>/Users/sahilseth/Dropbox2/Dropbox/public/github_flow/inst/pipelines/sleep_pipe.R</td>
</tr>
<tr class="row-odd"><td>fastq_bam_bwa</td>
<td>NA</td>
<td>NA</td>
<td>/Library/Frameworks/R.framework/Versions/3.2/Resources/library/ngsflows/pipelines/fastq_bam_bwa.R</td>
</tr>
<tr class="row-even"><td>fastq_bam_rna_ion</td>
<td>NA</td>
<td>NA</td>
<td>/Library/Frameworks/R.framework/Versions/3.2/Resources/library/ngsflows/pipelines/fastq_bam_rna_ion.R</td>
</tr>
<tr class="row-odd"><td>fastq_bam_variants</td>
<td>NA</td>
<td>NA</td>
<td>/Library/Frameworks/R.framework/Versions/3.2/Resources/library/ngsflows/pipelines/fastq_bam_variants.R</td>
</tr>
<tr class="row-even"><td>fastq_haplotyper</td>
<td>fastq_haplotyper.def</td>
<td>fastq_haplotyper.conf</td>
<td>/Library/Frameworks/R.framework/Versions/3.2/Resources/library/ngsflows/pipelines/fastq_haplotyper.R</td>
</tr>
<tr class="row-odd"><td>fastq_star_rna</td>
<td>NA</td>
<td>NA</td>
<td>/Library/Frameworks/R.framework/Versions/3.2/Resources/library/ngsflows/pipelines/fastq_star_rna.R</td>
</tr>
<tr class="row-even"><td>old_bam_pindel</td>
<td>NA</td>
<td>NA</td>
<td>/Library/Frameworks/R.framework/Versions/3.2/Resources/library/ngsflows/pipelines/old_bam_pindel.R</td>
</tr>
<tr class="row-odd"><td>old_bam_preprocess</td>
<td>NA</td>
<td>NA</td>
<td>/Library/Frameworks/R.framework/Versions/3.2/Resources/library/ngsflows/pipelines/old_bam_preprocess.R</td>
</tr>
<tr class="row-even"><td>old_bam_xenome</td>
<td>NA</td>
<td>NA</td>
<td>/Library/Frameworks/R.framework/Versions/3.2/Resources/library/ngsflows/pipelines/old_bam_xenome.R</td>
</tr>
<tr class="row-odd"><td>old_bwa_pipe</td>
<td>NA</td>
<td>NA</td>
<td>/Library/Frameworks/R.framework/Versions/3.2/Resources/library/ngsflows/pipelines/old_bwa_pipe.R</td>
</tr>
<tr class="row-even"><td>old_dna_qc</td>
<td>NA</td>
<td>NA</td>
<td>/Library/Frameworks/R.framework/Versions/3.2/Resources/library/ngsflows/pipelines/old_dna_qc.R</td>
</tr>
<tr class="row-odd"><td>old_fastq_bam_bwa2</td>
<td>NA</td>
<td>NA</td>
<td>/Library/Frameworks/R.framework/Versions/3.2/Resources/library/ngsflows/pipelines/old_fastq_bam_bwa2.R</td>
</tr>
<tr class="row-even"><td>old_fastq_bismark_meth</td>
<td>NA</td>
<td>NA</td>
<td>/Library/Frameworks/R.framework/Versions/3.2/Resources/library/ngsflows/pipelines/old_fastq_bismark_meth.R</td>
</tr>
<tr class="row-odd"><td>old_flow_bam_preprocess</td>
<td>NA</td>
<td>NA</td>
<td>/Library/Frameworks/R.framework/Versions/3.2/Resources/library/ngsflows/pipelines/old_flow_bam_preprocess.R</td>
</tr>
<tr class="row-even"><td>old_proc_bwa_pipe</td>
<td>NA</td>
<td>NA</td>
<td>/Library/Frameworks/R.framework/Versions/3.2/Resources/library/ngsflows/pipelines/old_proc_bwa_pipe.R</td>
</tr>
<tr class="row-odd"><td>split_aln_merge</td>
<td>split_aln_merge.def</td>
<td>NA</td>
<td>/Library/Frameworks/R.framework/Versions/3.2/Resources/library/ngsflows/pipelines/split_aln_merge.R</td>
</tr>
<tr class="row-even"><td>build-pipes</td>
<td>NA</td>
<td>NA</td>
<td>/Users/sahilseth/Dropbox2/Dropbox/public/github_flow/vignettes/build-pipes.R</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="cluster-support">
<h1>Cluster Support<a class="headerlink" href="#cluster-support" title="Permalink to this headline">¶</a></h1>
<p>Support for several popular cluster platforms are built-in. There is a template, for each platform, which should would out of the box. Further, one may copy and edit them (and save to <code class="docutils literal"><span class="pre">~/flowr/conf</span></code>) in case some changes are required. Templates from this folder (<code class="docutils literal"><span class="pre">~/flowr/conf</span></code>), would override defaults.</p>
<p>Here are links to latest templates on github:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/sahilseth/flowr/blob/master/inst/conf/torque.sh">torque</a></li>
<li><a class="reference external" href="https://github.com/sahilseth/flowr/blob/master/inst/conf/lsf.sh">lsf</a></li>
<li><a class="reference external" href="https://github.com/sahilseth/flowr/blob/master/inst/conf/moab.sh">moab</a></li>
<li><a class="reference external" href="https://github.com/sahilseth/flowr/blob/master/inst/conf/sge.sh">sge</a></li>
<li><a class="reference external" href="https://github.com/sahilseth/flowr/blob/master/inst/conf/slurm.sh">slurm</a>, needs testing</li>
</ul>
<p>Adding a new plaform involves <a class="reference external" href="https://github.com/sahilseth/flowr/issues/7">a few steps</a>, briefly we need to consider the following steps where changes would be neccesary.</p>
<ol class="arabic simple">
<li><strong>job submission</strong>: One needs to add a new template for the new platform. Several <a class="reference external" href="https://github.com/sahilseth/flowr/blob/master/inst/conf">examples</a> are available as described in the previous section.</li>
<li><strong>parsing job ids</strong>: flowr keeps a log of all submitted jobs, and also to pass them along as a dependency to subsequent jobs. This is taken care by the <a class="reference external" href="https://github.com/sahilseth/flowr/blob/master/R/parse-jobids.R">parse_jobids()</a> function. Each job scheduler shows the jobs id, when you submit a job, but each shows it in a slightly different pattern. To accomodate this one can use regular expressions as described in the relevent section of the <a class="reference external" href="https://github.com/sahilseth/flowr/blob/master/inst/conf/flowr.conf">flowr config</a>.</li>
</ol>
<p>For example LSF may show a string such as:</p>
<div class="highlight-python"><div class="highlight"><pre>Job &lt;335508&gt; is submitted to queue &lt;transfer&gt;.
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>jobid=&quot;Job &lt;335508&gt; is submitted to queue &lt;transfer&gt;.&quot;
set_opts(flow_parse_lsf = &quot;.*(\&lt;[0-9]*\&gt;).*  &quot;)
parse_jobids(jobid, platform=&quot;lsf&quot;)
[1] &quot;335508&quot;
</pre></div>
</div>
<p>In this case <em>335508</em> was the job id and regex worked well !</p>
<ol class="arabic simple" start="3">
<li><strong>render dependency</strong>: After collecting job ids from previous jobs, flowr render them as a dependency for subsequent jobs. This is handled by <a class="reference external" href="https://github.com/sahilseth/flowr/blob/master/R/parse-dependency.R">render_dependency.PLATFORM</a> functions.</li>
<li><strong>recognize new platform</strong>: Flowr needs to be made aware of the new platform, for this we need to add a new class using the platform name. This is essentially a wrapper around the <a class="reference external" href="https://github.com/sahilseth/flowr/blob/master/R/class-def.R">job class</a></li>
</ol>
<p>Essentially this requires us to add a new line like: <code class="docutils literal"><span class="pre">setClass(&quot;torque&quot;,</span> <span class="pre">contains</span> <span class="pre">=</span> <span class="pre">&quot;job&quot;)</span></code>.</p>
<ol class="arabic simple" start="5">
<li><strong>killing jobs</strong>: Just like submission flowr needs to know what command to use to kill jobs. This is defined in detect_kill_cmd function.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There are several <a class="reference external" href="http://en.wikipedia.org/wiki/Job_scheduler">job scheduling</a> systems available and we try to support the major players. Adding support is quite easy if we have access to them. Your favourite not in the list? re-open this issue, with details on the platform: <a class="reference external" href="https://github.com/sahilseth/flowr/issues/7">adding platforms</a></p>
</div>
<p>As of now we have tested this on the following clusters:</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="22%" />
<col width="27%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Platform</th>
<th class="head">command</th>
<th class="head">status</th>
<th class="head">queue.type</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>LSF 7</td>
<td>bsub</td>
<td>Not tested</td>
<td>lsf</td>
</tr>
<tr class="row-odd"><td>LSF 9.1</td>
<td>bsub</td>
<td>Yes</td>
<td>lsf</td>
</tr>
<tr class="row-even"><td>Torque</td>
<td>qsub</td>
<td>Yes</td>
<td>torque</td>
</tr>
<tr class="row-odd"><td>SGE</td>
<td>qsub</td>
<td>Beta</td>
<td>sge</td>
</tr>
<tr class="row-even"><td>SLURM</td>
<td>sbatch</td>
<td>under-dev</td>
<td>slurm</td>
</tr>
</tbody>
</table>
<p>*queue short-name used in <a class="reference external" href="https://github.com/sahilseth/flow">flow</a></p>
<ul class="simple">
<li>PBS: <a class="reference external" href="http://en.wikipedia.org/wiki/Portable_Batch_System">wiki</a></li>
<li>Torque: <a class="reference external" href="http://en.wikipedia.org/wiki/TORQUE_Resource_Manager">wiki</a><ul>
<li>MD Anderson</li>
<li><a class="reference external" href="http://www.rcc.uh.edu/hpc-docs/49-using-torque-to-submit-and-monitor-jobs.html">University of Houston</a></li>
</ul>
</li>
<li>LSF <a class="reference external" href="http://en.wikipedia.org/wiki/Platform_LSF">wiki</a>:<ul>
<li>Harvard Medicla School uses: <a class="reference external" href="https://wiki.med.harvard.edu/Orchestra/IntroductionToLSF">LSF HPC 7</a></li>
<li>Also Used at <a class="reference external" href="https://www.broadinstitute.org/gatk/guide/article?id=1311">Broad</a></li>
</ul>
</li>
<li>SGE <a class="reference external" href="http://en.wikipedia.org/wiki/Sun_Grid_Engine">wiki</a><ul>
<li>A tutorial for <a class="reference external" href="https://sites.google.com/site/anshulkundaje/inotes/programming/clustersubmit/sun-grid-engine">Sun Grid Engine</a></li>
<li>Another from <a class="reference external" href="http://www.biostat.jhsph.edu/bit/cluster-usage.html">JHSPH</a></li>
<li>Dependecy info <a class="reference external" href="https://wiki.duke.edu/display/SCSC/SGE+Job+Dependencies">here</a></li>
</ul>
</li>
</ul>
<p><a class="reference external" href="http://en.wikipedia.org/wiki/Comparison_of_cluster_software">Comparison_of_cluster_software</a></p>
</div>
<div class="section" id="example-of-building-a-pipeline">
<h1>Example of building a pipeline<a class="headerlink" href="#example-of-building-a-pipeline" title="Permalink to this headline">¶</a></h1>
<p>A pipeline consists of several pieces, namely, a function which generates a flowmat, a flowdef and optionally a text file with parameters and paths to tools used as part of the pipeline.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A R function which creates a flow mat, is a module. Further a module with a flow definition is a pipeline.</p>
</div>
<p>We beleive pipeline and modules may be interchangeble, in the sense that a <em>smaller</em> pipeline may be included as part of a larger pipeline. In flowr a module OR pipeline always returns a flowmat. The only differnce being, a pipeline also has a correspomding flow definition file. As such, creating a flow definition for a module enables flowr to run it, hence a module <strong>elevates</strong>, becoming a pipeline. This lets the user mix and match several modules/pipelines to create a customized larger pipeline(s).</p>
<p>Let us follow through an example, providing more details regarding this process. Here are a few examples of modules, three functions <code class="docutils literal"><span class="pre">sleep</span></code>, <code class="docutils literal"><span class="pre">create_tmp</span></code> and <code class="docutils literal"><span class="pre">merge_size</span></code> each returning a flowmat.</p>
<div class="section" id="define-modules">
<h2>Define modules<a class="headerlink" href="#define-modules" title="Permalink to this headline">¶</a></h2>
<div class="code r highlight-python"><div class="highlight"><pre>#&#39; @param x number of sleep commands
sleep &lt;- function(x, samplename){
    cmd = list(sleep = sprintf(&quot;sleep %s &amp;&amp; sleep %s;echo &#39;hello&#39;&quot;,
        abs(round(rnorm(x)*10, 0)),
        abs(round(rnorm(x)*10, 0))))
    flowmat = to_flowmat(cmd, samplename)
    return(list(flowmat = flowmat))
}

#&#39; @param x number of tmp commands
create_tmp &lt;- function(x, samplename){
    ## Create 100 temporary files
    tmp = sprintf(&quot;%s_tmp_%s&quot;, samplename, 1:x)
    cmd = list(create_tmp = sprintf(&quot;head -c 100000 /dev/urandom &gt; %s&quot;, tmp))
    ## --- convert the list into a data.frame
    flowmat = to_flowmat(cmd, samplename)
    return(list(flowmat = flowmat, outfiles = tmp))
}

#&#39; @param x vector of files to merge
merge_size &lt;- function(x, samplename){
    ## Merge them according to samples, 10 each
    mergedfile = paste0(samplename, &quot;_merged&quot;)
    cmd_merge &lt;- sprintf(&quot;cat %s &gt; %s&quot;,
        paste(x, collapse = &quot; &quot;), ## input files
        mergedfile)
    ## get the size of merged files
    cmd_size = sprintf(&quot;du -sh %s; echo &#39;MY shell:&#39; $SHELL&quot;, mergedfile)

    cmd = list(merge = cmd_merge, size = cmd_size)
    ## --- convert the list into a data.frame
    flowmat = to_flowmat(cmd, samplename)
    return(list(flowmat = flowmat, outfiles = mergedfile))
}
</pre></div>
</div>
<p>We then define another function <code class="docutils literal"><span class="pre">sleep_pipe</span></code> which calls the above defined <strong>modules</strong>; fetches flowmat from each, creating a larger flowmat. This time we will define a flowdef for the <code class="docutils literal"><span class="pre">sleep_pipe</span></code> function, elevating its status from module to a pipeline.</p>
</div>
<div class="section" id="define-the-pipeline">
<h2>Define the pipeline<a class="headerlink" href="#define-the-pipeline" title="Permalink to this headline">¶</a></h2>
<div class="code r highlight-python"><div class="highlight"><pre>#&#39; @param x number of files to make
sleep_pipe &lt;- function(x = 3, samplename = &quot;samp1&quot;){

    ## call the modules one by one...
    out_sleep = sleep(x, samplename)
    out_create_tmp = create_tmp(x, samplename)
    out_merge_size = merge_size(out_create_tmp$outfiles, samplename)

    ## row bind all the commands
    flowmat = rbind(out_sleep$flowmat,
        out_create_tmp$flowmat,
        out_merge_size$flowmat)

    return(list(flowmat = flowmat, outfiles = out_merge_size$outfiles))
}
</pre></div>
</div>
</div>
<div class="section" id="generate-a-flowmat">
<h2>Generate a flowmat<a class="headerlink" href="#generate-a-flowmat" title="Permalink to this headline">¶</a></h2>
<p>Here is how the generated flowmat looks like.</p>
<div class="code r highlight-python"><div class="highlight"><pre>out = sleep_pipe(x = 3, &quot;sample1&quot;)
flowmat = out$flowmat
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="15%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">samplename</th>
<th class="head">jobname</th>
<th class="head">cmd</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sample1</td>
<td>sleep</td>
<td>sleep 2 &amp;&amp; sleep 2;echo &#8216;hello&#8217;</td>
</tr>
<tr class="row-odd"><td>sample1</td>
<td>sleep</td>
<td>sleep 6 &amp;&amp; sleep 28;echo &#8216;hello&#8217;</td>
</tr>
<tr class="row-even"><td>sample1</td>
<td>sleep</td>
<td>sleep 11 &amp;&amp; sleep 11;echo &#8216;hello&#8217;</td>
</tr>
<tr class="row-odd"><td>sample1</td>
<td>create_tmp</td>
<td>head -c 100000 /dev/urandom &gt; sample1_tmp_1</td>
</tr>
<tr class="row-even"><td>sample1</td>
<td>create_tmp</td>
<td>head -c 100000 /dev/urandom &gt; sample1_tmp_2</td>
</tr>
<tr class="row-odd"><td>sample1</td>
<td>create_tmp</td>
<td>head -c 100000 /dev/urandom &gt; sample1_tmp_3</td>
</tr>
<tr class="row-even"><td>sample1</td>
<td>merge</td>
<td>cat sample1_tmp_1 sample1_tmp_2 sample1_tmp_3 &gt; sample1_merged</td>
</tr>
<tr class="row-odd"><td>sample1</td>
<td>size</td>
<td>du -sh sample1_merged; echo &#8216;MY shell:&#8217; $SHELL</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="create-flow-definition">
<h2>Create flow definition<a class="headerlink" href="#create-flow-definition" title="Permalink to this headline">¶</a></h2>
<p>flowr enables us to quickly create a skeleton flow definition using a flowmat, which we can then alter to suit our needs. A handy function to_flowdef, accepts a flowmat and creates a flow definition. The default skeleton takes a very conservative approach, creating all submissions as <code class="docutils literal"><span class="pre">serial</span></code> and all dependencies as <code class="docutils literal"><span class="pre">gather</span></code>. This ensures robustness, compromising efficiency. Thus we will enable parallel process where possible, making this into a better pipeline.</p>
<p>Here is how it looks presently:</p>
<div class="code r highlight-python"><div class="highlight"><pre>def = to_flowdef(flowmat)
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#&gt; Creating a skeleton flow definition</span>
<span class="c">#&gt; Following jobnames detected: sleep create_tmp merge size</span>
</pre></div>
</div>
<div class="code r highlight-python"><div class="highlight"><pre>plot_flow(suppressMessages(to_flow(flowmat, def)))
</pre></div>
</div>
<div class="figure">
<img alt="" src="../../_images/unnamed-chunk-18-1.png" />
</div>
<p>After making the desired changes, the new pipeline looks better. Alternatively, one may write this to a file and make other desired changes in resource requirements.</p>
<p>Pipeline follows the following steps, with dependencies mentioned in ():</p>
<ul class="simple">
<li>multiple sleep commands would run in parallel (none, first step)</li>
<li>For each sleep, create_tmp creates a tmp file (serial)</li>
<li>All tmp files are merged; when all are complete (gather)</li>
<li>Then we get size on the resulting file (serial)</li>
</ul>
<div class="code r highlight-python"><div class="highlight"><pre>def$sub_type = c(&quot;scatter&quot;, &quot;scatter&quot;, &quot;serial&quot;, &quot;serial&quot;)
def$dep_type = c(&quot;none&quot;, &quot;serial&quot;, &quot;gather&quot;, &quot;serial&quot;)
kable(def)
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="10%" />
<col width="11%" />
<col width="10%" />
<col width="7%" />
<col width="15%" />
<col width="9%" />
<col width="13%" />
<col width="9%" />
<col width="7%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">jobname</th>
<th class="head">sub_type</th>
<th class="head">prev_jobs</th>
<th class="head">dep_type</th>
<th class="head">queue</th>
<th class="head">memory_reserved</th>
<th class="head">walltime</th>
<th class="head">cpu_reserved</th>
<th class="head">platform</th>
<th class="head">jobid</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sleep</td>
<td>scatter</td>
<td>none</td>
<td>none</td>
<td>short</td>
<td>2000</td>
<td>1:00</td>
<td>1</td>
<td>torque</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>create_tmp</td>
<td>scatter</td>
<td>sleep</td>
<td>serial</td>
<td>short</td>
<td>2000</td>
<td>1:00</td>
<td>1</td>
<td>torque</td>
<td>2</td>
</tr>
<tr class="row-even"><td>merge</td>
<td>serial</td>
<td>create_tmp</td>
<td>gather</td>
<td>short</td>
<td>2000</td>
<td>1:00</td>
<td>1</td>
<td>torque</td>
<td>3</td>
</tr>
<tr class="row-odd"><td>size</td>
<td>serial</td>
<td>merge</td>
<td>serial</td>
<td>short</td>
<td>2000</td>
<td>1:00</td>
<td>1</td>
<td>torque</td>
<td>4</td>
</tr>
</tbody>
</table>
<div class="code r highlight-python"><div class="highlight"><pre>plot_flow(suppressMessages(to_flow(flowmat, def)))
</pre></div>
</div>
<div class="figure">
<img alt="" src="../../_images/unnamed-chunk-20-1.png" />
</div>
</div>
</div>




  

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'flowrdocs'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../faqs.html" class="btn btn-neutral float-right" title="FAQs" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../index.html" class="btn btn-neutral" title="flowr: Streamline your workflows" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Sahil Seth.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.9.7',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 



<div id="editor-trap">
      <h3>Edit this document!</h3>

      <p>
        This file can be edited directly through the Web. Anyone can
        update and fix errors in this document with few clicks --
        no downloads needed.
      <p>

      <ol>

        <li>
          Go to
        <a href="https://github.com/ctb/flowr/blob/master/rd/vignettes/build-pipes.rst">
          Get started
        </a> on GitHub.
      </li>

        <li>
        <b>Edit</b> files using GitHub's text editor in your web browser (see the 'Edit' tab on the top right of the file)
      </li>

      <li>
        Fill in the <b>Commit message</b> text box at the bottom of the page describing <i>why</i>
        you made the changes. Press the <b>Propose file change</b> button next to it when done.
      </li>

      <li>
        Then click <b>Send a pull request</b>.
      </li>

      <li>
        Your changes are now queued for review under the project's <a href="https://github.com/ctb/flowr/pulls">Pull requests</a> tab on GitHub!
      </li>
      </ol>

      <p>
        For an introduction to the documentation format please see <a href="http://docutils.sourceforge.net/docs/user/rst/quickstart.html">the reST primer</a>.
      </p>

  </div>



<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', UA-36028965-1]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>



</body>
</html>